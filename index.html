<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Lotto Bot</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
h1 { text-align: center; }
button { margin: 5px; padding: 10px 15px; font-size: 16px; }
.results, .stats { margin-top: 15px; padding: 10px; background: white; border-radius: 6px; }
</style>
</head>
<body>
<h1>üéØ Lotto Bot</h1>

<button onclick="makePrediction()">–°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑</button>
<button onclick="addDraw()">–î–æ–±–∞–≤–∏—Ç—å —Ç–∏—Ä–∞–∂</button>
<button onclick="clearHistory()">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>

<div class="results" id="prediction"></div>
<div class="stats" id="statistics"></div>

<script>
let stats = JSON.parse(localStorage.getItem('lottoStats')) || {
    zones: { A: {hits:0,total:0}, B: {hits:0,total:0}, C: {hits:0,total:0} },
    overall: {hits:0,total:0},
    lastPrediction: null
};

function getRandomDigits(count) {
    let digits = [...Array(10).keys()];
    let res = [];
    for (let i=0; i<count; i++) {
        let idx = Math.floor(Math.random() * digits.length);
        res.push(digits.splice(idx,1)[0]);
    }
    return res;
}

function makePrediction() {
    let prediction = {
        A: getRandomDigits(3),
        B: getRandomDigits(3),
        C: getRandomDigits(3)
    };
    stats.lastPrediction = prediction;
    saveStats();
    showPrediction();
}

function addDraw() {
    if (!stats.lastPrediction) {
        alert("–°–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–π—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑!");
        return;
    }
    let draw = {};
    for (let zone of ["A","B","C"]) {
        let input = prompt(`–í–≤–µ–¥–∏—Ç–µ 2 —á–∏—Å–ª–∞ –∑–æ–Ω—ã ${zone} —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: 3,7):`);
        if (!input) return;
        draw[zone] = input.split(",").map(n=>parseInt(n.trim())).filter(n=>!isNaN(n));
        if (draw[zone].length !== 2) return alert("–ù—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —Ä–æ–≤–Ω–æ 2 —á–∏—Å–ª–∞!");
    }
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–π
    let allPredicted = [];
    let allDrawn = [];
    for (let zone of ["A","B","C"]) {
        let predicted = stats.lastPrediction[zone];
        let actual = draw[zone];
        let hits = predicted.filter(n => actual.includes(n)).length;
        stats.zones[zone].hits += hits;
        stats.zones[zone].total += predicted.length;
        allPredicted.push(...predicted);
        allDrawn.push(...actual);
    }
    let overallHits = allPredicted.filter(n => allDrawn.includes(n)).length;
    stats.overall.hits += overallHits;
    stats.overall.total += allPredicted.length;
    saveStats();
    showStats();
}

function clearHistory() {
    if (confirm("–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É?")) {
        stats = {
            zones: { A: {hits:0,total:0}, B: {hits:0,total:0}, C: {hits:0,total:0} },
            overall: {hits:0,total:0},
            lastPrediction: null
        };
        saveStats();
        document.getElementById('prediction').innerHTML = "";
        document.getElementById('statistics').innerHTML = "";
    }
}

function saveStats() {
    localStorage.setItem('lottoStats', JSON.stringify(stats));
}

function showPrediction() {
    if (!stats.lastPrediction) return;
    let html = "";
    for (let zone of ["A","B","C"]) {
        html += `<p>${zone}: ${stats.lastPrediction[zone].join(", ")}</p>`;
    }
    document.getElementById('prediction').innerHTML = `<h3>–ü—Ä–æ–≥–Ω–æ–∑:</h3>${html}`;
}

function showStats() {
    let html = "<h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h3>";
    for (let zone of ["A","B","C"]) {
        let z = stats.zones[zone];
        let pct = z.total ? ((z.hits/z.total)*100).toFixed(1) : 0;
        html += `<p>${zone}: ${pct}% (${z.hits}/${z.total})</p>`;
    }
    let o = stats.overall;
    let pctO = o.total ? ((o.hits/o.total)*100).toFixed(1) : 0;
    html += `<p><b>–û–±—â–∏–π:</b> ${pctO}% (${o.hits}/${o.total})</p>`;
    document.getElementById('statistics').innerHTML = html;
}

// –ü–æ–∫–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
showPrediction();
showStats();
</script>

</body>
</html>
